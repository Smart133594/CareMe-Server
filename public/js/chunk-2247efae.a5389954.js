(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2247efae","chunk-7b39d290"],{"3a7e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("page-title-bar",{on:{actionClick:function(t){e.dialog=!0}}}),a("app-section-loader",{attrs:{status:e.loading}}),a("v-container",{attrs:{fluid:"","grid-list-xl":"","p-5":""}},[a("v-row",[a("app-card",{attrs:{fullBlock:!0,colClasses:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"}},[a("v-card-title",[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.coupons,search:e.search},scopedSlots:e._u([{key:"body",fn:function(t){var i=t.items;return[a("tbody",e._l(i,(function(t,i){return a("tr",{key:"service"+t.id},[a("td",[e._v(e._s(i+1))]),a("td",[e._v(" "+e._s(t.code)+" ")]),a("td",[e._v(" "+e._s(t.description)+" ")]),a("td",[e._v(" "+e._s(t.percent)+" ")]),a("td",[e._v(" "+e._s(t.type)+" ")]),a("td",[e._v(" "+e._s(t.expire)+" ")]),a("td",[1==t.available?a("v-btn",{staticClass:"ma-2",attrs:{color:"primary"},on:{click:function(a){return e.edit(t)}}},[e._v(e._s(e.$t("message.edit")))]):e._e(),1==t.available?a("v-btn",{staticClass:"ma-2",attrs:{color:"error"},on:{click:function(a){return e.deleteCoupon(t)}}},[e._v(e._s(e.$t("message.delete")))]):e._e(),0==t.available?a("v-badge",{staticClass:"p-2 info",attrs:{value:!1}},[e._v(e._s(e.$t("message.used")))]):e._e()],1)])})),0)]}}])})],1)],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[e._v(" "+e._s(e.$t("message.coupons"))+" ")]),a("v-divider"),a("v-card-text",[a("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[a("v-text-field",{attrs:{label:e.$t("message.code"),rules:e.requireRule,required:""},model:{value:e.model.code,callback:function(t){e.$set(e.model,"code",t)},expression:"model.code"}})],1),a("v-row",[a("v-text-field",{attrs:{label:e.$t("message.description"),rules:e.requireRule,required:""},model:{value:e.model.description,callback:function(t){e.$set(e.model,"description",t)},expression:"model.description"}})],1),a("v-row",[a("v-text-field",{attrs:{label:e.$t("message.percent"),rules:e.requireRule,required:"",type:"number"},model:{value:e.model.percent,callback:function(t){e.$set(e.model,"percent",t)},expression:"model.percent"}})],1),a("v-row",[a("v-select",{attrs:{label:e.$t("message.vendor"),"item-value":"id",items:e.types,rules:e.requireRule,required:""},model:{value:e.model.type,callback:function(t){e.$set(e.model,"type",t)},expression:"model.type"}})],1),a("v-row",[a("v-menu",{ref:"expire_date",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","nudge-right":40,"min-width":"290px","return-value":e.model.expire},on:{"update:returnValue":function(t){return e.$set(e.model,"expire",t)},"update:return-value":function(t){return e.$set(e.model,"expire",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-text-field",e._g({attrs:{label:e.$t("message.expireDate"),"prepend-icon":"event",readonly:"",rules:e.requireRule,required:""},model:{value:e.model.expire,callback:function(t){e.$set(e.model,"expire",t)},expression:"model.expire"}},i))]}}]),model:{value:e.expireMenu,callback:function(t){e.expireMenu=t},expression:"expireMenu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.model.expire,callback:function(t){e.$set(e.model,"expire",t)},expression:"model.expire"}},[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.expireMenu=!1}}},[e._v("Cancel")]),a("v-btn",{attrs:{color:"warning"},on:{click:function(t){return e.$refs.expire_date.save(e.model.expire)}}},[e._v("OK")])],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("div",{staticClass:"spacer"}),a("v-btn",{attrs:{color:"info",disabled:!e.valid||e.loading,loading:e.loading},on:{click:function(t){return t.stopPropagation(),e.save(t)}}},[e._v(e._s(e.$t("message.save")))]),a("v-btn",{attrs:{color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[e._v(e._s(e.$t("message.cancel")))])],1)],1)],1)],1)},s=[],n=a("5530"),o=(a("d3b7"),a("a4d3"),a("e01a"),a("2f62")),r=a("365c"),l=a("2b0e"),c=a("e065"),d=a("aab7"),u={components:{Bookings:d["default"]},data:function(){var e=this;return{loading:!1,valid:!1,search:"",baseUrl:c["a"].testMode?c["a"].localhost:c["a"].domain,requireRule:[function(t){return!!t||e.$t("message.fieldRequired")}],dialog:!1,headers:[{text:this.$t("message.no")},{text:this.$t("message.code"),value:"code"},{text:this.$t("message.description"),value:"description"},{text:this.$t("message.percent"),value:"percent"},{text:this.$t("message.type"),value:"type"},{text:this.$t("message.expireDate"),value:"expire"},{text:this.$t("message.settings")}],model:{code:"",description:"",percent:10,type:"cart",expire:null,available:!0,id:-1},coupons:[],types:["cart","product","service"],expireMenu:!1}},computed:Object(n["a"])({},Object(o["b"])(["getUser","selectedLocale"])),methods:{save:function(){var e=this;this.loading=!0,r["a"].post("addCoupon",JSON.stringify(this.model),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getUser.token)}}).then((function(t){t.data.success?e.dialog=!1:l["default"].notify({group:"center",type:"error",text:e.$t("message.registerFailed")}),e.cancel(),e.getCoupons()})).catch((function(e){l["default"].notify({group:"center",type:"error",text:e})})).finally((function(){e.loading=!1}))},cancel:function(){this.model={code:"",description:"",percent:10,type:"cart",expire:null,available:!0,id:-1},this.dialog=!1},getCoupons:function(){var e=this;this.loading=!0,r["a"].get("getCoupons",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getUser.token)}}).then((function(t){t.data.success&&(e.coupons=t.data.data)})).finally((function(){e.loading=!1}))},edit:function(e){this.model.id=e.id,this.model.code=e.code,this.model.description=e.description,this.model.type=e.percent,this.model.type=e.type,this.model.expire=e.expire,this.dialog=!0},deleteCoupon:function(e){var t=this;this.loading=!0,r["a"].post("deleteCoupon",JSON.stringify({id:e.id}),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getUser.token)}}).then((function(e){t.getCoupons()})).finally((function(){t.loading=!1}))}},mounted:function(){this.getCoupons()},beforeMount:function(){}},p=u,f=a("2877"),m=a("6544"),g=a.n(m),h=a("4ca6"),v=a("8336"),b=a("b0af"),_=a("99d9"),y=a("a523"),x=a("8fea"),k=a("2e4b"),$=a("169a"),C=a("ce7e"),B=a("4bd4"),w=a("e449"),O=a("0fd9"),V=a("b974"),j=a("2fa4"),S=a("8654"),R=Object(f["a"])(p,i,s,!1,null,null,null);t["default"]=R.exports;g()(R,{VBadge:h["a"],VBtn:v["a"],VCard:b["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:_["c"],VContainer:y["a"],VDataTable:x["a"],VDatePicker:k["a"],VDialog:$["a"],VDivider:C["a"],VForm:B["a"],VMenu:w["a"],VRow:O["a"],VSelect:V["a"],VSpacer:j["a"],VTextField:S["a"]})},"4ca6":function(e,t,a){"use strict";var i=a("15fd"),s=a("5530"),n=(a("a9e3"),a("ff44"),a("132d")),o=a("a9ad"),r=a("7560"),l=a("f2e7"),c=a("2b0e"),d=c["default"].extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),u=a("fe6c"),p=a("58df"),f=a("80d2");t["a"]=Object(p["a"])(o["a"],Object(u["b"])(["left","bottom"]),r["a"],l["a"],d).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes:function(){return Object(s["a"])({"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile},this.themeClasses)},computedBottom:function(){return this.bottom?"auto":this.computedYOffset},computedLeft:function(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight:function(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop:function(){return this.bottom?this.computedYOffset:"auto"},computedXOffset:function(){return this.calcPosition(this.offsetX)},computedYOffset:function(){return this.calcPosition(this.offsetY)},isRtl:function(){return this.$vuetify.rtl},offset:function(){return this.overlap?this.dot?8:12:this.dot?2:4},styles:function(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition:function(e){return"calc(100% - ".concat(Object(f["g"])(e||this.offset),")")},genBadge:function(){var e=this.$vuetify.lang,t=this.$attrs["aria-label"]||e.t(this.label),a=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":t,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),i=this.$createElement("span",a,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[i]):i},genBadgeContent:function(){if(!this.dot){var e=Object(f["s"])(this,"badge");return e||(this.content?String(this.content):this.icon?this.$createElement(n["a"],this.icon):void 0)}},genBadgeWrapper:function(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render:function(e){var t=[this.genBadgeWrapper()],a=[Object(f["s"])(this)],s=this.$attrs,n=(s["aria-atomic"],s["aria-label"],s["aria-live"],s.role,s.title,Object(i["a"])(s,["aria-atomic","aria-label","aria-live","role","title"]));return this.inline&&this.left?a.unshift(t):a.push(t),e("span",{staticClass:"v-badge",attrs:n,class:this.classes},a)}})},aab7:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("app-section-loader",{attrs:{status:e.loading}}),a("v-container",{attrs:{fluid:"","grid-list-xl":"","py-0":""}},[a("v-row",[a("app-card",{attrs:{fullBlock:!0,colClasses:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"}},[a("v-card-title",[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.bookings,search:e.search},scopedSlots:e._u([{key:"body",fn:function(t){var i=t.items;return[a("tbody",e._l(i,(function(t,i){return a("tr",{key:"booking"+t.id},[a("td",[e._v(e._s(i+1))]),a("td",[a("a",{attrs:{href:""+e.baseUrl+t.invoice,target:"_blank"}},[e._v(e._s(e.$t("message.invoice")))])]),a("td",[e._v(" "+e._s(t["en"==e.selectedLocale.locale?"en_name":"ar_name"])+" ")]),a("td",[e._v(" "+e._s(t.date)+" ")]),a("td",e._l(t.times,(function(t,i){return a("p",{key:i+"item",staticClass:"m-0"},[e._v(" "+e._s(t.from_time)+" ~ "+e._s(t.to_time)+" ")])})),0),a("td",[a("p",{staticClass:"m-0"},[e._v(" "+e._s(t.full_name)+" ")]),a("p",{staticClass:"m-0"},[e._v(" "+e._s(t.phone)+" ")])]),a("td",[a("p",{staticClass:"m-0"},[e._v(" "+e._s(t.worker_name)+" ")])]),a("td",[e._v(" "+e._s(e.$t("message.currency"))+" "+e._s(parseFloat(t.amount).toFixed(2))+" ")]),a("td",["insurance"==t.type?a("div",{staticClass:"d-flex flex-direction-row"},[a("v-img",{staticClass:"m-0",attrs:{width:"50",height:"50",src:e.baseUrl+"uploads/bookings/"+t.image},on:{click:function(a){return e.showImage(e.baseUrl+"uploads/bookings/"+t.image)}}}),a("v-img",{staticClass:"m-0 ml-1",attrs:{width:"50",height:"50",src:e.baseUrl+"uploads/bookings/"+t.image1},on:{click:function(a){return e.showImage(e.baseUrl+"uploads/bookings/"+t.image1)}}})],1):a("div",[a("p",{staticClass:"m-0",staticStyle:{"text-transform":"uppercase"}},[e._v(e._s(t.type))])])]),a("td",[a("v-badge",{staticClass:"p-2",class:{error:"paid"!=t.payment_status,info:"paid"==t.payment_status},attrs:{value:!1}},[e._v(e._s(t.payment_status))])],1),a("td",[a("v-badge",{staticClass:"p-2",class:{info:"accepted"==t.state||"completed"==t.state,error:"pending"==t.state||"rejected"==t.state},attrs:{value:!1}},[e._v(e._s(t.state))])],1),a("td",[a("v-menu",{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({attrs:{icon:""}},i),[a("v-icon",[e._v("more_vert")])],1)]}}],null,!0)},[a("v-list",{staticStyle:{cursor:"pointer"}},["pending"==t.state?a("v-btn",{staticClass:"mt-1",attrs:{text:"",block:""},on:{click:function(a){return e.confirmBooking(t)}}},[e._v(e._s(e.$t("message.confirm")))]):e._e(),"paid"!=t.payment_status&&"accepted"==t.state?a("v-btn",{staticClass:"mt-1",attrs:{text:"",block:""},on:{click:function(a){return e.payBooking(t)}}},[e._v(e._s(e.$t("message.pay")))]):e._e(),"pending"==t.state?a("v-btn",{staticClass:"mt-1",attrs:{text:"",block:""},on:{click:function(a){return e.rejectBooking(t)}}},[e._v(e._s(e.$t("message.reject")))]):e._e()],1)],1)],1)])})),0)]}}])})],1)],1)],1)],1)},s=[],n=a("5530"),o=(a("d3b7"),a("159b"),a("e065")),r=a("2f62"),l=a("365c"),c=a("2b0e"),d={computed:Object(n["a"])({},Object(r["b"])(["getUser","selectedLocale"])),data:function(){return{loading:!1,bookings:[],search:"",baseUrl:o["a"].testMode?o["a"].localhost:o["a"].domain,headers:[{text:this.$t("message.no"),value:"no"},{text:this.$t("message.invoice"),value:"invoice"},{text:this.$t("message.service"),value:"en_name"},{text:this.$t("message.date"),value:"date"},{text:this.$t("message.times"),value:"times"},{text:this.$t("message.client"),value:"full_name"},{text:this.$t("message.worker"),value:"worker_name"},{text:this.$t("message.amount"),value:"amount"},{text:this.$t("message.type"),value:"type"},{text:this.$t("message.payment"),value:"payment"},{text:this.$t("message.state"),value:"state"},{text:this.$t("message.settings")}],selectedItem:{},imageUrl:"",dialog:!1}},methods:{getBookings:function(){var e=this;this.loading=!0,l["a"].get("getBookings",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getUser.token)}}).then((function(t){if(t.data.success){var a=t.data.data;a.forEach((function(e){var t=e.times;null!=t&&(e.times=JSON.parse(t))})),e.bookings=a}})).catch((function(e){})).finally((function(){e.loading=!1}))},view:function(e){this.selectedItem=e,this.dialog=!0},edit:function(e){this.selectedItem=e,this.dialog=!0},confirmBooking:function(e){var t=this;this.loading=!0,l["a"].post("confirmBooking",JSON.stringify({id:e.id}),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getUser.token)}}).then((function(e){e.data.success||c["default"].notify({group:"center",type:"error",text:t.$t("message.alreadyRejectedOrCanceled")}),t.getBookings()})).catch((function(e){})).finally((function(){t.loading=!1}))},payBooking:function(e){var t=this;this.loading=!0,l["a"].post("payBooking",JSON.stringify({id:e.id}),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getUser.token)}}).then((function(e){e.data.success||c["default"].notify({group:"center",type:"error",text:t.$t("message.alreadyRejectedOrCanceled")}),t.getBookings()})).catch((function(e){})).finally((function(){t.loading=!1}))},rejectBooking:function(e){var t=this;this.loading=!0,l["a"].post("rejectBooking",JSON.stringify({id:e.id}),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getUser.token)}}).then((function(e){e.data.success||c["default"].notify({group:"center",type:"error",text:t.$t("message.alreadyRejectedOrCanceled")}),t.getBookings()})).catch((function(e){})).finally((function(){t.loading=!1}))},showImage:function(e){window.open(e,"_blank")}},mounted:function(){},beforeMount:function(){this.getBookings()}},u=d,p=a("2877"),f=a("6544"),m=a.n(f),g=a("4ca6"),h=a("8336"),v=a("99d9"),b=a("a523"),_=a("8fea"),y=a("132d"),x=a("adda"),k=a("8860"),$=a("e449"),C=a("0fd9"),B=a("2fa4"),w=a("8654"),O=Object(p["a"])(u,i,s,!1,null,null,null);t["default"]=O.exports;m()(O,{VBadge:g["a"],VBtn:h["a"],VCardTitle:v["c"],VContainer:b["a"],VDataTable:_["a"],VIcon:y["a"],VImg:x["a"],VList:k["a"],VMenu:$["a"],VRow:C["a"],VSpacer:B["a"],VTextField:w["a"]})},ff44:function(e,t,a){}}]);