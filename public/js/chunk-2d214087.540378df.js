(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d214087"],{aee2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("page-title-bar",{on:{actionClick:e.addNew}}),n("app-section-loader",{attrs:{status:e.loading}}),n("v-container",{attrs:{fluid:"","grid-list-xl":"","p-5":""}},[n("v-row",[n("app-card",{attrs:{fullBlock:!0,colClasses:"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"}},[n("v-data-table",{attrs:{headers:e.headers,items:e.holidays},scopedSlots:e._u([{key:"body",fn:function(t){var a=t.items;return[n("tbody",e._l(a,(function(t,a){return n("tr",{key:"holiday"+t.id},[n("td",[e._v(e._s(a+1))]),n("td",[e._v(e._s(e.getVendorName(t)))]),n("td",[e._v(e._s(t.starting_date))]),n("td",[e._v(e._s(t.ending_date))]),n("td",[n("v-btn",{staticClass:"ma-2",attrs:{color:"primary"},on:{click:function(n){return e.editHoliday(t)}}},[e._v(e._s(e.$t("message.edit")))]),n("v-btn",{staticClass:"ma-2",attrs:{color:"error"},on:{click:function(n){return e.deleteHoliday(t)}}},[e._v(e._s(e.$t("message.delete")))])],1)])})),0)]}}])})],1)],1)],1),n("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v(" "+e._s(e.$t("message.service"))+" ")]),n("v-divider"),n("v-card-text",[n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12"}},[n("v-select",{attrs:{label:e.$t("message.vendor"),"item-text":"en"==e.selectedLocale.locale?"en_name":"ar_name","item-value":"id",items:e.vendors,rules:e.requireRule,required:""},model:{value:e.vendor_id,callback:function(t){e.vendor_id=t},expression:"vendor_id"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-menu",{ref:"starting_date",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","nudge-right":40,"min-width":"290px","return-value":e.starting_date},on:{"update:returnValue":function(t){e.starting_date=t},"update:return-value":function(t){e.starting_date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-text-field",e._g({attrs:{label:e.$t("message.startingDate"),"prepend-icon":"event",readonly:"",rules:e.requireRule,required:""},model:{value:e.starting_date,callback:function(t){e.starting_date=t},expression:"starting_date"}},a))]}}]),model:{value:e.startingMenu,callback:function(t){e.startingMenu=t},expression:"startingMenu"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.starting_date,callback:function(t){e.starting_date=t},expression:"starting_date"}},[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.startingMenu=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"warning"},on:{click:function(t){return e.$refs.starting_date.save(e.starting_date)}}},[e._v("OK")])],1)],1)],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-menu",{ref:"ending_date",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","nudge-right":40,"min-width":"290px","return-value":e.ending_date},on:{"update:returnValue":function(t){e.ending_date=t},"update:return-value":function(t){e.ending_date=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-text-field",e._g({attrs:{label:e.$t("message.endingDate"),"prepend-icon":"event",readonly:"",rules:e.requireRule,required:""},model:{value:e.ending_date,callback:function(t){e.ending_date=t},expression:"ending_date"}},a))]}}]),model:{value:e.endingMenu,callback:function(t){e.endingMenu=t},expression:"endingMenu"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.ending_date,callback:function(t){e.ending_date=t},expression:"ending_date"}},[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.endingMenu=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"warning"},on:{click:function(t){return e.$refs.ending_date.save(e.ending_date)}}},[e._v("OK")])],1)],1)],1)],1)],1)],1),n("v-divider"),n("v-card-actions",[n("div",{staticClass:"spacer"}),n("v-btn",{attrs:{color:"info",disabled:!e.valid||e.loading,loading:e.loading},on:{click:function(t){return t.stopPropagation(),e.save(t)}}},[e._v(e._s(e.$t("message.save")))]),n("v-btn",{attrs:{color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[e._v(e._s(e.$t("message.cancel")))])],1)],1)],1)],1)},i=[],r=n("5530"),d=(n("d3b7"),n("4de4"),n("2f62")),o=n("365c"),s=n("2b0e"),l={data:function(){var e=this;return{loading:!1,holidays:[],vendors:[],vendor_id:null,dialog:!1,valid:!1,id:-1,starting_date:null,ending_date:null,requireRule:[function(t){return!!t||e.$t("message.fieldRequired")}],startingMenu:!1,endingMenu:!1,headers:[{text:this.$t("message.no"),value:"no",align:"center"},{text:this.$t("message.vendor"),value:"vendor",align:"center"},{text:this.$t("message.startingDate"),value:"starting_date",align:"center"},{text:this.$t("message.endingDate"),value:"ending_date",align:"center"},{text:this.$t("message.settings"),value:"settings",align:"center"}]}},computed:Object(r["a"])({},Object(d["b"])(["getUser","selectedLocale"])),methods:{getHolidays:function(){var e=this;this.loading=!0,o["a"].get("getHolidays",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getUser.token)}}).then((function(t){t.data.success&&(e.vendors=t.data.data.vendors,e.holidays=t.data.data.holidays)})).catch((function(e){s["default"].notify({group:"loggedIn",type:"error",text:e})})).finally((function(){e.loading=!1}))},save:function(){var e=this;if(this.valid){if(this.starting_date>this.ending_date)return void s["default"].notify({group:"loggedIn",type:"error",text:this.$t("message.dateInvalid")});var t={id:this.id,starting_date:this.starting_date,ending_date:this.ending_date,vendor_id:this.vendor_id};o["a"].post("addHoliday",JSON.stringify(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getUser.token)}}).then((function(t){t.data.success&&(e.cancel(),e.getHolidays())})).catch((function(e){s["default"].notify({group:"loggedIn",type:"error",text:e})})).finally((function(){e.loading=!1}))}},cancel:function(){this.starting_date=null,this.ending_date=null,this.id=-1,this.dialog=!1},editHoliday:function(e){this.starting_date=e.starting_date,this.ending_date=e.ending_date,this.vendor_id=e.vendor_id,this.id=e.id,this.dialog=!0},deleteHoliday:function(e){var t=this,n={id:e.id};o["a"].post("deleteHoliday",JSON.stringify(n),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getUser.token)}}).then((function(n){n.data.success&&(t.holidays=t.holidays.filter((function(t){return t.id!=e.id})))})).catch((function(e){s["default"].notify({group:"loggedIn",type:"error",text:e})})).finally((function(){t.loading=!1}))},addNew:function(){this.vendors.length>0&&(this.vendor_id=this.vendors[0].id),this.dialog=!0},getVendorName:function(e){for(var t=0;t<this.vendors.length;t++){var n=this.vendors[t];if(n.id==e.vendor_id)return n["en"==this.selectedLocale.locale?"en_name":"ar_name"]}}},mounted:function(){this.getHolidays()},watch:{}},c=l,u=n("2877"),g=n("6544"),v=n.n(g),f=n("8336"),_=n("b0af"),h=n("99d9"),p=n("62ad"),m=n("a523"),y=n("8fea"),b=n("2e4b"),k=n("169a"),x=n("ce7e"),V=n("4bd4"),$=n("e449"),w=n("0fd9"),C=n("b974"),M=n("2fa4"),H=n("8654"),q=Object(u["a"])(c,a,i,!1,null,null,null);t["default"]=q.exports;v()(q,{VBtn:f["a"],VCard:_["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:p["a"],VContainer:m["a"],VDataTable:y["a"],VDatePicker:b["a"],VDialog:k["a"],VDivider:x["a"],VForm:V["a"],VMenu:$["a"],VRow:w["a"],VSelect:C["a"],VSpacer:M["a"],VTextField:H["a"]})}}]);